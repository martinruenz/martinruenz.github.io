<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Photostory: An open-source workflow for creating slideshows</title>
  <meta name="description" content="Photostory is a tool to generate slideshows using Blender. It can generate videos directly, but also offers a workflow for more customization.">
  <meta name="keywords" content="Martin Rünz, Martin Ruenz, Martin Runz, Computer Vision, Computer Graphics, Research, Blog">
  <!-- <link rel="stylesheet" href="/js/lightgallery/css/lightgallery.css"> -->
  <link rel="stylesheet" href="/js/lightgallery/css/lightgallery.min.css">
  <link rel="stylesheet" href="/css/main.css">
  <link rel="stylesheet" href="/css/hl-native.css">
  <link rel="canonical" href="https://www.martinruenz.de/article/open-source/2018/07/03/photostory.html">
  <link rel="alternate" type="application/rss+xml" title="Martin Rünz" href="https://www.martinruenz.de/feed.xml">
  
</head>


  <body>

    <header class="site-header">

    <div class="nav-area">
    <div class="wrapper">
    <a class="site-title" href="/#page-content">Blog</a><a href="/feed.xml"><div class="icon icon--rss"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg"><path d="M12.8 16C12.8 8.978 7.022 3.2 0 3.2V0c8.777 0 16 7.223 16 16h-3.2zM2.194 11.61c1.21 0 2.195.985 2.195 2.196 0 1.21-.985 2.194-2.196 2.194C.984 16 0 15.017 0 13.806c0-1.21.983-2.195 2.194-2.195zM10.606 16h-3.11c0-4.113-3.383-7.497-7.496-7.497v-3.11c5.818 0 10.606 4.79 10.606 10.607z"/></svg></div></a>

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <svg viewBox="0 0 18 15">
          <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
          <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
          <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
        </svg>
      </a>

      <div class="trigger">
        
          
          <a class="page-link" href="/talks/#page-content">Talks / Presentations</a>
          
        
          
          <a class="page-link" href="/publications#page-content">Publications</a>
          
        
          
          <a class="page-link" href="/about/#page-content">About</a>
          
        
          
        
          
        
          
        
      </div>
    </nav>
  </div>
  </div>

  <div class="thats-me">
    <img src="/media/martin_150.jpg" class="animated hinge fadeInDown">
    <h2 class="animated hinge fadeInDown" itemscope itemtype="http://schema.org/Person">
      Hi, my name is <strong itemprop="name">Martin Rünz</strong>I am a Lead Research Scientist at <a href="https://www.synthesia.io/">Synthesia</a>!
    </h2>
  </div>
  <!--<nav class="actions">
    <a href="/about" class="button ghost">About</a>
    <a href="/archive/master.zip" class="button ghost">Download</a>
  </nav>-->

</header>


    <div class="page-content" id="page-content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <span class="icon--post"><?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg
   xmlns:dc="http://purl.org/dc/elements/1.1/"
   xmlns:cc="http://creativecommons.org/ns#"
   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
   xmlns:svg="http://www.w3.org/2000/svg"
   xmlns="http://www.w3.org/2000/svg"
   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
   enable-background="new 0 0 128 128"
   id="Layer_1"
   version="1.1"
   viewBox="0 0 128 128"
   xml:space="preserve"
   sodipodi:docname="photostory.svg"
   inkscape:version="0.92.3 (unknown)"><metadata
     id="metadata47"><rdf:RDF><cc:Work
         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type
           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /><dc:title></dc:title></cc:Work></rdf:RDF></metadata><defs
     id="defs45"><mask
       id="mask4811"
       maskUnits="userSpaceOnUse"><rect
         ry="7.6036825"
         rx="17.008154"
         y="110.84672"
         x="-17.953869"
         height="124.92113"
         width="80.886902"
         id="rect4813"
         style="opacity:1;vector-effect:none;fill:#8f98de;fill-opacity:1;stroke:none;stroke-width:2.02343845;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke fill markers" /></mask><mask
       id="mask4811-7"
       maskUnits="userSpaceOnUse"><rect
         ry="7.6036825"
         rx="17.008154"
         y="110.84672"
         x="-17.953869"
         height="124.92113"
         width="80.886902"
         id="rect4813-5"
         style="opacity:1;vector-effect:none;fill:#8f98de;fill-opacity:1;stroke:none;stroke-width:2.02343845;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke fill markers" /></mask><filter
       id="filter5056"
       inkscape:label="Drop Shadow"
       style="color-interpolation-filters:sRGB"><feFlood
         id="feFlood5046"
         result="flood"
         flood-color="rgb(0,0,0)"
         flood-opacity="0.235294" /><feComposite
         id="feComposite5048"
         result="composite1"
         operator="in"
         in2="SourceGraphic"
         in="flood" /><feGaussianBlur
         id="feGaussianBlur5050"
         result="blur"
         stdDeviation="0.1"
         in="composite1" /><feOffset
         id="feOffset5052"
         result="offset"
         dy="0.4"
         dx="0.4" /><feComposite
         id="feComposite5054"
         result="composite2"
         operator="over"
         in2="offset"
         in="SourceGraphic" /></filter><filter
       id="filter5068"
       inkscape:label="Drop Shadow"
       style="color-interpolation-filters:sRGB"><feFlood
         id="feFlood5058"
         result="flood"
         flood-color="rgb(0,0,0)"
         flood-opacity="0.235294" /><feComposite
         id="feComposite5060"
         result="composite1"
         operator="in"
         in2="SourceGraphic"
         in="flood" /><feGaussianBlur
         id="feGaussianBlur5062"
         result="blur"
         stdDeviation="0.1"
         in="composite1" /><feOffset
         id="feOffset5064"
         result="offset"
         dy="0.4"
         dx="0.4" /><feComposite
         id="feComposite5066"
         result="composite2"
         operator="over"
         in2="offset"
         in="SourceGraphic" /></filter></defs><sodipodi:namedview
     pagecolor="#ffffff"
     bordercolor="#666666"
     borderopacity="1"
     objecttolerance="10"
     gridtolerance="10"
     guidetolerance="10"
     inkscape:pageopacity="0"
     inkscape:pageshadow="2"
     inkscape:window-width="1920"
     inkscape:window-height="1025"
     id="namedview43"
     showgrid="false"
     inkscape:zoom="1.84375"
     inkscape:cx="-61.971864"
     inkscape:cy="56.370222"
     inkscape:window-x="0"
     inkscape:window-y="27"
     inkscape:window-maximized="1"
     inkscape:current-layer="g40" /><g
     id="g40"><circle
       cx="64"
       cy="64"
       r="63.5"
       id="circle2"
       style="fill:#f2c1f3;fill-opacity:1" /><path
       d="M 101.16762,18.15894 91.156165,34.722963 65.491758,60.367035 30.321007,95.667827 22.769096,102.1761 37.415547,121.51985 c 43.786505,19.49202 76.320283,-10.73756 86.040623,-34.505358 z"
       id="path4"
       inkscape:connector-curvature="0"
       style="fill:#e0a8e1;fill-opacity:1"
       sodipodi:nodetypes="cccccccc" /><g
       transform="matrix(0.96227048,0,0,0.96227048,60.70807,-107.19586)"
       id="layer1"
       inkscape:label="Layer 1"><rect
         ry="15.616777"
         rx="15.616777"
         y="127.2887"
         x="-42.144344"
         height="98.273796"
         width="86.556549"
         id="rect4770"
         style="opacity:1;vector-effect:none;fill:#324d5c;fill-opacity:1;stroke:none;stroke-width:1.39999998;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke fill markers" /><path
         sodipodi:nodetypes="csssccc"
         inkscape:connector-curvature="0"
         d="m 37.040027,127.28869 c 4.35902,0 7.868266,3.50924 7.868266,7.86826 v 82.53727 c 0,4.35902 -3.509246,7.86827 -7.868266,7.86827 h -62.788016 c 0,0 -0.02526,-73.36009 -0.02526,-98.27381 0,0 41.903356,1e-5 62.813276,1e-5 z"
         style="opacity:1;vector-effect:none;fill:#46b29d;fill-opacity:1;stroke:none;stroke-width:1.39999998;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke fill markers"
         id="rect4770-6-3" /><path
         transform="matrix(1.3540225,0,0,1.3540225,-3.068328,-61.02178)"
         sodipodi:nodetypes="sccssccsssscscssssssssssscssscssssccccccssssssssss"
         inkscape:connector-curvature="0"
         d="m 24.666309,165.66088 h -8.548158 l -3.072488,-3.50948 c -0.286633,-0.32686 -0.700488,-0.51443 -1.134961,-0.51443 H -0.61603195 c -0.43447305,0 -0.84832855,0.18759 -1.13496105,0.51443 l -3.072488,3.50948 h -3.699127 c -1.665984,0 -3.017174,1.35118 -3.017174,3.01718 v 20.11498 c 0,1.66599 1.35119,3.01717 3.017174,3.01717 h 6.8203225 c 2.35188675,2.76776 5.8563334,4.52576 9.7741364,4.52576 3.9178011,0 7.4222481,-1.758 9.7741351,-4.52576 h 6.820323 c 1.665983,0 3.017173,-1.35118 3.017173,-3.01717 v -20.11498 c 0,-1.666 -1.35119,-3.01718 -3.017173,-3.01718 z M 8.0718509,193.3188 c -5.4067781,0 -9.8058172,-4.39903 -9.8058172,-9.80581 0,-5.40677 4.3990391,-9.80582 9.8058172,-9.80582 5.4067761,0 9.8058161,4.39905 9.8058161,9.80582 0,5.40678 -4.39904,9.80581 -9.8058161,9.80581 z m 16.5944581,-5.02862 c 0,0.27808 -0.22478,0.50286 -0.502862,0.50286 h -4.406583 c 0.728647,-1.61067 1.137977,-3.39684 1.137977,-5.28005 0,-7.08331 -5.739671,-12.823 -12.8229901,-12.823 -7.08332146,0 -12.8229913,5.73969 -12.8229913,12.823 0,1.88321 0.4088266,3.66938 1.1379773,5.28005 h -4.4065833 c -0.2780816,0 -0.5028616,-0.22478 -0.5028616,-0.50286 v -19.10927 c 0,-0.27809 0.22478,-0.50285 0.5028616,-0.50285 h 4.5650563 l 0.9016324,-1.02987 2.62142165,-2.99405 H 11.226809 l 2.621422,2.99405 0.901632,1.02987 h 9.413584 c 0.278082,0 0.502862,0.22476 0.502862,0.50285 z M 8.0718509,175.4672 c -4.5750433,0 -8.29723015,3.72218 -8.29723015,8.29722 0,0.83324 0.6753434,1.50859 1.50858625,1.50859 0.8332438,0 1.5085871,-0.67535 1.5085871,-1.50859 0,-2.91158 2.3684809,-5.28006 5.2800568,-5.28006 0.8332433,0 1.5085873,-0.67534 1.5085873,-1.50859 0,-0.83323 -0.675344,-1.50857 -1.5085873,-1.50857 z"
         style="fill:#f0ca4d;fill-opacity:0.94117647;stroke-width:0.50286233;filter:url(#filter5068)"
         id="path4877" /><path
         sodipodi:nodetypes="ccsscscc"
         inkscape:connector-curvature="0"
         id="rect4887"
         d="m 17.789434,127.21678 h 16.819937 v 23.55836 c 0,2.21877 -3.364951,0.57697 -4.204984,-0.006 -1.964368,-1.36408 -4.228257,-4.8909 -4.204984,-4.90383 0,0 -2.262635,3.95565 -4.204985,4.85793 -1.271301,0.59056 -4.204984,1.41708 -4.204984,0.0522 z"
         style="opacity:1;vector-effect:none;fill:#de5b49;fill-opacity:1;stroke:none;stroke-width:0.77391297;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke fill markers;filter:url(#filter5056)" /></g></g></svg></span>
    <h1 class="post-title" itemprop="name headline">Photostory: An open-source workflow for creating slideshows</h1><hr/>
    <p class="post-meta">
      <time datetime="2018-07-03T23:00:00+02:00" itemprop="datePublished">Jul 3, 2018</time>
      
    </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p><img style="float:left;max-width: 120px; margin:10px; margin-right:20px;" src="/media/photostory/photostory.svg" /></p>

<h4 id="tldr-">TL;DR …</h4>

<p><a href="https://github.com/martinruenz/photostory">Photostory</a> is a tool to generate slideshows using Blender. It can generate videos directly, but also offers more customization using the following workflow: <strong>GUI</strong> ➜ JSON ➜ <strong>Blender</strong> ➜ render. Videos below.</p>

<h4 id="-continued">… continued:</h4>

<p>There is a bunch of people – including myself – that is keen about photography, as well as open-source software. The two are not always coming along greatly, as companies behind professional software for digital photographers usually neglect our niche audience. Linux is scarcely supported and <a href="http://www.winehq.com">Wine</a> / VM workarounds are not entirely optimal. Luckily, though, there is significant effort by the community to improve the landscape of professional-level tools. Anyhow, in this post I don’t want to write about photography tools in general, but about something more specific: <em>How to show selected pictures to family and friends?</em></p>

<p>After taking countless pictures during a back-packing tour, I recently wanted to generate a
slideshow to present some of the captured moments to my family. Ideally, such a slideshow is a
plain video file which can be played universally, for instance on the TV of my parents. In the Mac
world, I guess, you could use iPhoto for this task but I was disappointed with the alternatives
offered for Windows or Linux. Even professional tools, such as Lightroom, provide a rather
cumbersome workflow and in the end I decided to write a small tool that allows you to easily arrange
photos and create a video. The rendering part is handled by <a href="http://www.blender.org">Blender</a>, which
also allows you to customize the generated scene. The features I wanted to have are the following:</p>

<ul>
  <li><strong>GUI</strong>: A graphical user-interface to drag-and-drop photographs</li>
  <li><strong>Multi-picture</strong> slides: Each slide can have an arbitrary amount of pictures</li>
  <li><strong>Auto-layout</strong>: The layout is generated automatically (but can be customized)</li>
  <li><strong>Background pictures</strong>: Ability to set foreground and background pictures for each slide</li>
  <li><strong>Routes</strong>: Support of GPS-slides, which animate a route given a set of GPS coordinates</li>
  <li><strong>Extensibility</strong>: An extensible tool-chain that allows to add different effects and designs</li>
</ul>

<p>My first idea was to write a single C++ application with a front-end to do the arrangement of photographs and a back-end for the rendering, using image libraries such as <a href="https://opencv.org">opencv</a> or <a href="https://www.imagemagick.org">imagemagick</a>.
After some considerations, however, I realised that some 3D effects like ambient occlusion and the animation of routes would involve more development than I was willing to invest and making such a tool extensible would lead to a fair amount of planning and overhead on its own. Instead, I opted for a scriptable animation software to do the rendering and my clear choice was to opt for <a href="https://www.blender.org">Blender</a>. Ultimately, the front-end is a <a href="https://en.wikipedia.org/wiki/Qt_(software)">Qt</a> C++ application, which exports the arrangement of slides to a <a href="https://en.wikipedia.org/wiki/JSON">JSON</a> file. This file is then loaded by a blender-plugin that automatically generates geometry, textures and camera movement. The user interface is able to completely hide the execution of Blender, but also allows you to get your hands dirty and tweak or augment the scene if you wish to do so.</p>

<h4 id="automatic-workflow">Automatic workflow</h4>

<p>The automatic workflow hides details of the manual process away, but obviously gives you fewer settings to adjust. The following video shows how to arrange slides using the <code class="language-plaintext highlighter-rouge">photo-selector</code>:</p>

<div class="row" style="margin: 1.2em auto; text-align: center;">
  <video width="100%" height="auto" controls="">
    <source src="/media/photostory/photo-selector.mp4" type="video/mp4" />
  	Here should be a video, but your browser does not support it.
  </video>
</div>

<p>And here is the result after rendering:</p>

<div class="row" style="margin: 1.2em auto; text-align: center;">
  <video width="100%" height="auto" controls="">
    <source src="/media/photostory/demo.webm" />
    <source src="/media/photostory/demo.mp4" type="video/mp4" />
  	Here should be a video, but your browser does not support HTML5 (webm-)videos.
  </video>
</div>

<h4 id="manual-workflow">Manual workflow</h4>

<p>Instead of rendering the video directly from the GUI it is possible to save the JSON exchange format in order to import it into Blender manually. The resulting file describes slides like this:</p>

<figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"photo_slide"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"background_paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
    </span><span class="nl">"foreground_paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="s2">"joshua-earle-560344-unsplash.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"kea-mowat-574639-unsplash.jpg"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"pascal-debrunner-634122-unsplash.jpg"</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></figure>

<p>In Blender load the slideshow via <strong>File ➜ Import ➜ Photostory (.json)</strong>. This importer gives you the options:</p>

<ul>
  <li><strong>Unroll map</strong>: If set, adds an unrolling map animation to the beginning of the scene (see example).</li>
  <li><strong>Skip duplicates</strong>: If set, placeholder images for duplicate frames are created in the output directory (this directory needs to be specified in Blender before importing). This will speed up the rendering process significantly as long as the <strong>overwrite</strong> flag in Blender is not set. After rendering, placeholders need to be replaced using the script &lt;/br&gt; <strong>photo-selector/generate_duplicates.py</strong>, which replaces empty image files with the previous non-empty image.</li>
  <li><strong>Setup scene</strong>: If set, scene properties such as start and end frame are adjusted as well.</li>
  <li><strong>Default slide duration</strong>: Default duration of slides (might be overwritten by JSON).</li>
</ul>

<p><img src="/media/photostory/cast-import.gif" alt="blender-import" title="Importing a slideshow in blender" /></p>

<p>Now you have the opportunity to customize the slideshow in 3D using Blender. The generated scene should work with the internal as well as Cycles renderer. Rendering is done usual, only make sure not to change the output directory if you generated placeholders with be setting <em>skip duplicates</em>.</p>

<h4 id="features-i-like">Features I like</h4>

<ul>
  <li>The Blender addon sets up materials compatible with <strong>Cycles</strong> and the <strong>internal renderer</strong> of Blender</li>
  <li>The map uses a height-map and (optionally) shows an <em>unrolling</em> animation when it’s shown for the first time</li>
  <li>Videos are supported as well. If a slide contains a video, it is shown long enough for the video to finish</li>
  <li>The addon tries to reduce rendering time by skipping identical frames</li>
</ul>

<h4 id="limitations">Limitations</h4>

<ul>
  <li>The workflow is one-directional. Adjustments that were done manually in Blender stay in Blender. Of course, the modified Blender scene can be saved and used as always, but if you re-order slides in the GUI you have to import a new JSON file which generates a new Blender scene. Hence, modifications you did in Blender with an old iteration of you slideshow will not be applied to the new version. As a consequence, think of Blender as an optional tool for post-production that is used after finalizing the JSON slideshow.</li>
  <li>Even if identical frames are skipped and the internal renderer is used, rendering can easily take hours. (Hopefully this will improve with <a href="https://code.blender.org/2018/03/eevee-f-a-q/">EEVEE</a>, which is not supported yet)</li>
</ul>

<h4 id="contribute">Contribute</h4>

<p>Photostory is <a href="https://github.com/martinruenz/photostory">hosted on github</a> and you are more than welcome to contribute. Please open issues if you find bugs or have recommendations and ideally, create pull requests if you can fix issues yourself. Maybe you also have good ideas for generating layouts or scenes with different styles.</p>

  </div>

  

</article>

      </div>
    </div>

    <footer class="footer">
  <div class="container">
    <ul class="icons">
      
      
      <li>
        <a href="https://github.com/martinruenz" class="icon-github" target="_blank">
          <i class="fa-brands fa-github"></i>
        </a>
      </li>
      
      
      <li>
        <a href="https://scholar.google.com/citations?user=Pz6kr-gAAAAJ" class="icon-scholar" target="_blank">
          <i class="fa-solid fa-user-graduate"></i>
        </a>
      </li>
      
      
      
      <li>
        <a href="https://twitter.com/martin_ruenz" class="icon-twitter" target="_blank">
          <i class="fa-brands fa-twitter"></i>
        </a>
      </li>
      
      
      <li>
        <a rel="me" href="https://sigmoid.social/@martin_ruenz" class="icon-mastodon" target="_blank">
          <i class="fa-brands fa-mastodon"></i>
        </a>
      </li>
      
      
      <li>
        <a href="https://www.linkedin.com/in/martinruenz" class="icon-linkedin" target="_blank">
          <i class="fa-brands fa-linkedin"></i>
        </a>
      </li>
      
    </ul>

    <!--
    <p class="quote">
      <i>“The key thing about all the world's big problems is that they have to be dealt with collectively. If we don't get collectively smarter, we're doomed.”</i>
      <small>– Douglas Engelbart</small>
    </p>
    -->
    <p><small>Created with <a href="http://jekyllrb.com" target="_blank">Jekyll</a>, theme inspired by <a href="http://nandomoreira.me/nandomoreira-jekyll-theme">Fernando Moreira</a></small></p>
    <!--
    <small class="clearfix">
      Made with <a href="http://jekyllrb.com" target="_blank">Jekyll</a> • <a href="" target="_blank">Open source <i class="fa fa-heart"></i></a>
    </small>
    -->
  </div>
</footer>

<a class="scroll-up fa fa-chevron-up bounce" href="#" data-position="0"></a>


  </body>

</html>
